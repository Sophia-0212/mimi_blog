# HTTP协议各个版本之间区别？

## 1.区别

HTTP（Hypertext Transfer Protocol）是一种用于传输超文本的协议，是现代网络中最常用的协议之一。HTTP协议的版本有多个，主要包括以下几个：

1. HTTP/0.9：最初版本的HTTP协议，**只支持GET方法**，并且**没有请求头和响应头的概念**，**只能传输纯文本**。于1991年发布，由Tim Berners-Lee创建，被认为是HTTP的起源。该版本只支持GET请求，并且响应只能是HTML文本。
2. HTTP/1.0：在HTTP/0.9的基础上**增加了请求头和响应头**的概念，并支持**多种HTTP方法，包括GET、POST、PUT、DELETE**等。于1996年发布，该版本的周期大约是6年，在2000年左右被广泛使用。
3. HTTP/1.1：在HTTP/1.0的基础上进行了扩展和优化，包括**持久连接**、**管线化**、**分块传输编码**等特性，可以更高效地传输数据。于1999年发布，该版本的周期大约是15年，在2014年左右仍然是主流。
4. HTTP/2：在HTTP/1.1的基础上进行了进一步的优化，包括**二进制协议**、**多路复用**、**服务器推送**等特性，能够更快地传输数据。HTTP/2于2015年发布，采用二进制协议，引入了多路复用、服务器推送等特性，进一步提高了性能。该版本的周期约为6年。
5. HTTP/3：是HTTP协议的最新版本，基于QUIC协议进行了重构，具有更快的传输速度、更低的延迟和更好的安全性。HTTP/3于2020年发布，采用**基于UDP**的QUIC协议，该版本目前正在逐渐被广泛采用。


HTTP协议的不同版本之间主要区别在于协议特性的增加和改进，新版本的协议通常会更加高效、安全和易用。

## 2.持久连接？
持久连接是指在**同一个 TCP 连接上可以发送多个 HTTP 请求和响应**，而不必每次都建立新的连接。HTTP/1.1 和 HTTP/2 默认使用持久连接。

在 HTTP/1.1 中，管线化是通过在同一个 TCP 连接上同时发送多个请求来实现的。客户端可以在发送请求时添加 Connection: keep-alive 首部，以告知服务器使用持久连接。服务器在返回响应时同样可以添加 Connection: keep-alive 首部，以告知客户端保持连接打开状态。
## 3.管线化？
HTTP/1.1 中引入了管线化技术，允许客户端在同一个 TCP 连接上发送多个请求，**而不需要等待前一个请求的响应**。这种方式可以显著提高网络性能和吞吐量。


管线化的主要好处是**减少了网络延迟和 TCP 连接建立的开销**，从而可以提高请求响应速度和网络吞吐量。不过，管线化技术也存在一些限制和缺点，例如不同请求的响应时间不同，可能导致后面的请求需要等待前面请求的响应，而且可能会存在响应顺序混乱的问题，需要使用复杂的处理机制来解决这些问题。因此，在 HTTP/2 中，管线化技术被弃用，而采用了多路复用技术来提高网络性能。


## 4.持久连接和管线化区别？
持久连接和管线化是不同的东西。

持久连接和管线化虽然都是利用同一TCP连接发送多个HTTP请求，但实现方式略有不同。

持久连接是通过在同一TCP连接中**发送多个HTTP请求和响应**来实现的。在发送一个HTTP请求后，客户端和服务器端都会保持这个TCP连接的打开状态，直到另一个请求指示它关闭。这样可以避免为每个请求和响应都建立和关闭TCP连接的开销，从而提高性能。

管线化是通过在同一TCP连接中**连续发送多个HTTP请求**来实现的。客户端在发送第一个请求后，可以立即发送第二个请求，而不必等待第一个请求的响应。服务器也可以按照请求的顺序，依次返回响应，而不必等待前面的响应。这样可以进一步减少请求和响应之间的等待时间，从而提高性能。

虽然两种技术都可以减少TCP连接的开销和提高性能，但持久连接和管线化的具体实现方式和优化效果略有不同，需要根据具体情况进行选择。

## 5.分块传输编码？
分块传输编码（Chunked Transfer Encoding）是一种HTTP协议的传输编码方式，它允许**HTTP响应**在传输过程中进行**分块**，并且不需要知道响应的内容长度。在使用分块传输编码时，HTTP响应会被分为一系列块（chunk），每个块都包含一个十六进制的长度值和实际数据，最后以一个空的块（长度为0）表示数据的结束。

分块传输编码的主要优势是可以在不知道响应内容长度的情况下逐步向客户端传输数据，而**不需要等待整个响应内容加载完成**。**这种编码方式在处理大型响应或流媒体等场景下特别有用。**

除此之外，分块传输编码还可以避免一些问题，例如当服务器在传输响应内容时突然中断连接，可以使客户端尽可能多地获取到响应内容。另外，分块传输编码还可以降低HTTP流量的延迟，减少HTTP传输时的网络拥塞

## 6.二进制协议？
二进制协议：HTTP/1.x使用**文本协议**进行通信，而HTTP/2使用二进制协议，这样可以减少协议的开销，提高数据的传输效率。

**为什么使用二进制协议，这样可以减少协议的开销，提高数据的传输效率？**

使用二进制协议可以减少协议的开销，主要有以下几个方面的优势：

 1. 传输数据的大小更小：二进制协议对数据进行了**二进制压缩**，可以大大减小传输数据的大小，减少了网络传输的负担。
 2. 传输速度更快：由于数据大小变小，传输速度自然也就更快，可以提高网络传输的效率。
 3. 传输的数据更安全：二进制协议采用了更**复杂的数据结构和加密算法**，可以提高数据的安全性。
 4. 更高的兼容性：二进制协议在多种系统和平台上都能够良好地运行，具有更好的兼容性和可扩展性。

因此，使用二进制协议可以提高数据传输的效率，降低网络传输的负担，同时也可以提高数据的安全性和可扩展性。

## 7.多路复用？
多路复用：HTTP/2允许在同一个TCP连接中同时传输多个请求和响应，这样可以减少连接的数量，避免了建立和关闭连接的开销，提高了数据的传输效率。

### 7.1多路复用与管线话和持久连接的区别？

多路复用、管线化和持久连接是网络通信中的三个不同概念，但它们都是为了提高网络传输的效率。下面我们详细地了解它们之间的区别：

1. **持久连接 (Persistent Connection)**：
   - **定义**：持久连接，也常被称为 keep-alive 连接，意味着两个通信节点在完成一个请求-响应周期后不会立即关闭连接，而是保持这个连接一段时间，使得之后的请求可以继续使用这个已经建立的连接。
   - **优势**：减少了建立和关闭连接的开销，使得多个请求和响应能更加迅速地连续传输。
   - **使用场景**：HTTP/1.1 默认采用持久连接。

2. **管线化 (Pipelining)**：
   - **定义**：在同一个持久连接上，客户端可以连续地发送多个请求而无需等待每个响应。服务器在收到请求后**按照收到的顺序依次进行响应**。
   - **优势**：减少了因等待响应而导致的延迟，从而能够加快连续的请求-响应速度。
   - **局限性**：虽然管线化可以提高性能，但因为它需要服务器**按照请求的顺序进行响应**，如果其中一个请求的处理时间较长，可能会导致其他请求的处理被**阻塞**，这种现象被称为“队头堵塞”问题。

3. **多路复用 (Multiplexing)**：
   - **定义**：多路复用允许在单一的连接上并发地传输多个请求和响应消息。与管线化不同，多路复用**不需要按照发送的顺序进行响应**，所以可以避免队头堵塞问题。
   - **优势**：实现了**真正的并发请求和响应**，提高了带宽的利用率和传输的效率。
   - **使用场景**：HTTP/2 和 HTTP/3 采用了多路复用技术。

总结：
- 持久连接关注的是复用已经建立的连接。
- 管线化允许连续发送多个请求但可能受到队头堵塞问题的影响。
- 多路复用实现了真正的并发请求和响应，并解决了队头堵塞问题。

在实际使用中，根据不同的应用需求和网络环境，可能会选择适当的技术或者它们的组合来优化网络性能。

### 7.2多路复用是如何实现在同一个TCP连接上同时发送多个HTTP请求和响应的？
在HTTP/2中，多个HTTP请求和响应可以在同一个TCP连接上并行发送和接收。HTTP/2使用了**二进制分帧机制**，将HTTP请求和响应数据分成一个个小的二进制帧，每个帧都有自己的帧头信息，**可以被乱序发送和接收**，并且多个帧可以**同时发送和接收**，从而实现了多路复用的功能。


### 7.3如何理解"多路复用"这四个字？明明是一个TCP连接

"多路复用"这四个字**指的是在一个 TCP 连接上同时传输多个 HTTP 请求和响应的技术**，可以看作是一种复用 TCP 连接的方式，同时能够同时传输多路数据，从而提高网络传输效率。换句话说，**多路复用技术让同一个 TCP 连接同时承载多个数据流**，将多个 HTTP 请求和响应分成多个流，通过标识每个数据流的 ID，使得服务端和客户端能够正确地分辨和处理每个数据流。**因此，"多路复用"的含义是指在一个 TCP 连接上，同时复用多个数据流，而不是简单地复用一个连接**。



## 8. 服务器推送？

服务器推送（Server Push）是HTTP/2协议中的一项功能，它允许服务器在客户端请求数据之前将数据**主动推送到客户端缓存中**。这样可以提高应用程序的性能和响应速度，因为客户端不需要等待服务器响应才能获取所需的数据，而是可以**在客户端需要之前提前获取**。

服务器推送的实现方式是在HTTP/2协议中添加了一个**新的帧类型——PUSH_PROMISE**。当服务器需要主动推送数据时，它可以使用这个帧类型向客户端发送推送请求。客户端收到推送请求后，可以选择接受或拒绝这个请求，如果接受，服务器就会把推送的数据主动发送到客户端缓存中。

服务器推送的**优点是可以减少网络延迟和带宽占用，提高应用程序的性能和响应速度**。但是，它也存在一些**缺点**，比如可能会浪费带宽和客户端资源，因为客户端**可能不需要这些推送的数据**。因此，在实现服务器推送时需要权衡利弊，选择合适的推送策略，以达到最优的性能和用户体验。

### 8.1服务器推送的使用场景？
服务器推送通常用于以下场景：

**实时通信**：在聊天应用程序或在线游戏中，需要实时地将新消息或事件推送到客户端。

**数据流式传输**：在视频或音频流等场景中，需要将数据以流的形式传输，而不是等待完整的文件下载后再进行播放。

**加速应用程序**：通过将静态资源预加载到缓存中，可以加快应用程序的加载速度。

**数据库更新**：在需要即时更新数据的应用程序中，可以使用服务器推送将更新通知推送到客户端。

总之，**任何需要及时将信息推送到客户端的应用程序**都可以使用服务器推送来实现。


## 9.QUIC协议？
QUIC（Quick UDP Internet Connections）协议是由Google设计的基于UDP协议的新一代互联网传输协议。相较于TCP协议，QUIC协议具有更快的连接和重连速度，更好的流量控制和拥塞控制，以及更高的安全性。

QUIC协议的主要特点包括：

**基于UDP协议**：相较于TCP协议，UDP协议没有连接建立和断开的开销，可以减少网络延迟和连接的建立时间。

多路复用：与HTTP/2类似，QUIC协议也支持多路复用，可以在同一个连接上同时传输多个数据流，提高传输效率和性能。

数据流量控制和拥塞控制：QUIC协议内置了数据流量控制和拥塞控制机制，可以根据网络状况调整数据传输速率，避免网络拥塞和数据丢失。

安全性：QUIC协议内置了TLS协议，可以保护数据传输的隐私和安全性，避免被恶意攻击和窃取。

QUIC协议目前已经被广泛应用于Google的服务中，例如Chrome浏览器、YouTube视频服务等，也正在逐渐被其他互联网服务和应用所采用。


### 9.1QUIC协议基于UDP岂不是会不可靠不安全？
不，QUIC协议在基于UDP上**构建了自己的可靠性机制**，包括数据包重传、拥塞控制、流量控制等，因此相对于原始的UDP，QUIC协议具备了更好的可靠性和安全性。


