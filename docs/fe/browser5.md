## HTTP与HTTPS的比较？

**HTTP（Hypertext Transfer Protocol）和HTTPS（HTTP Secure）是用于在客户端和服务器之间传输数据的协议，它们在以下几个方面有所区别：**

1. 安全性：
- HTTP是**明文协议**，数据在传输过程中不加密，容易被窃取和篡改。而HTTPS通过使用**SSL/TLS协议**对数据进行加密，确保传输的数据是安全的，可以有效**防止中间人攻击和数据泄露**(**不能完全防止中间人攻击：篡改受信任的根证书颁发机构、劫持证书颁发机构的私钥等**)。
- HTTPS**使用数字证书对数据进行数字签名**，确保传输的数据在传输过程中没有被篡改或修改。客户端可以验证证书的合法性，确保与服务器建立的连接是可信的。

2. 默认端口：HTTP使用**80**端口进行通信，而HTTPS使用**443**端口进行通信。


## HTTPS 为什么更安全：

**一、加密技术**

**对称加密与非对称加密结合**：
   - HTTPS 在建立连接的过程中，首先使用非对称加密算法来交换密钥。服务器拥有私钥，将对应的公钥发送给客户端。客户端使用公钥对一个随机生成的对称密钥进行加密，并发送给服务器。服务器用私钥解密得到对称密钥。
   - 后续的数据传输就使用这个对称密钥进行加密和解密，对称加密算法速度快，效率高，适合大量数据的加密传输。
   - 这种结合方式既保证了密钥交换的安全性，又保证了数据传输的效率。

**二、身份验证**

**第三方数字证书**：
   - 服务器会向客户端提供数字证书，数字证书是由权威的证书颁发机构（CA）颁发的。证书中包含了服务器的名称、公钥等信息，以及 CA 的数字签名。
   - 客户端收到证书后，会验证证书的合法性。首先，检查证书的颁发机构是否受信任。客户端通常会内置一些受信任的 CA 列表，如果证书是由这些 CA 颁发的，或者可以通过信任链追溯到受信任的 CA，那么证书被认为是合法的。
   - 然后，客户端会验证证书中的数字签名，确保证书没有被篡改。数字签名是使用 CA 的私钥对证书内容进行加密生成的，客户端使用 CA 的公钥进行解密验证。如果验证通过，说明证书确实是由合法的 CA 颁发且未被篡改，从而确认服务器的身份。

**三、完整性校验**

1. **消息摘要算法**：
   - HTTPS 在数据传输过程中，会使用消息摘要算法对传输的数据生成一个固定长度的摘要。常见的消息摘要算法如 SHA-256 等。
   - 发送方在发送数据时，会同时计算数据的摘要，并将摘要一起发送给接收方。接收方在收到数据后，也会对数据进行同样的摘要计算。
   - 接收方将自己计算得到的摘要与发送方发送过来的摘要进行对比，如果一致，说明数据在传输过程中没有被篡改，保证了数据的完整性。

## HTTPS 建立连接的过程

1. 服务器生成密钥对：服务器首先生成一个**密钥对**，包括公钥和私钥。

2. 证书请求：服务器将公钥发送给受信任的第三方机构（证书颁发机构，CA），请求颁发证书。

3. 验证身份：证书颁发机构验证服务器的身份。

4. 颁发证书：一旦服务器的身份验证通过，证书颁发机构会生成证书并将其签名。证书中包含了服务器的公钥以及其他相关信息。

5. 客户端验证：当客户端与服务器建立HTTPS连接时，服务器会将证书发送给客户端。客户端会验证证书的合法性，包括检查证书的**签名、过期时间、颁发机构**等。

6. 可信根证书：客户端会使用自己**内置的受信任的根证书**（Root CA）来验证服务器证书的合法性。如果证书链可以追溯到受信任的根证书，且没有被撤销或过期，客户端会信任服务器的证书。